---
title: "Extra"
output: html_document
date: "2024-01-13"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Geomtric Operations: Point Maps

Choropleth maps are great, but point maps enable us to visualize our spatial data in another way.

If you know both mapping methods you can expand how much information you can show in one map.

For example, point maps are a better way to map `counts` because the varying sizes of areas are deemphasized.

-   We can use the `sf::st_centroid` function to dynamically transform the county polygons to their centroids (point centers).

-   We then use the `tm_dot` element to create point maps dynamically from polygon data! Let's take a look.

```{r}
# County population counts as a point map!
tmap_mode('plot')

# Add the county polygon borders as a basemap
tm_shape(counties) + 
  tm_borders(col = "grey") +
  
# Then map the county centroids as points colored by population counts
  tm_shape(st_centroid(counties)) + 
  tm_dots(col = 'POP2012',
              palette = 'YlOrRd', 
              style = 'jenks',
              border.col = "black",  # dot borders only visible in interactive mode!
              border.lwd = 1,
              border.alpha = 1,
              size = .5,
              legend.show = T) 
```

This is another useful type of data transformation for making effective maps.

------------------------------------------------------------------------

### Geometric Creations

-   st_point
-   st_voronoi (?)

### Making your own sf objects

You can hand code your own sf objects, but most people just read in spatial data from a file!

```{r, eval=T}
p <- rbind(c(10, 40), c(40, 30), c(20, 20), c(30, 10))
(mp <- st_multipoint(p))
plot(mp)

```

```{r}
#read in the cal_enviro shapefile
cal_enviro <- st_read(dsn= "data/calenviroscreen40shpf2021shp/CES4 Final Shapefile.shp")
#dsn = data source name
```

## 

## Joins and Aggregations

\*\* consider including spatial joins (introduce using attribute joins) and aggregation

------------------------------------------------------------------------

## Recap

Leveraging what we've learned in our earlier lessons, we got to work with map overlays and start answering questions related to proximity. Key concepts include:

-   Measuring area and length
    -   `st_area`,
    -   `st_length`
    -   `st_distance`
-   Spatial relationship queries
    -   `st_intersects`,
    -   `st_intersection`
    -   `st_within`, etc.
-   Buffer analysis
    -   `st_buffer`
